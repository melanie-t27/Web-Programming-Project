<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Music</title>
</head>

<body>
	<div th:replace="/WEB-INF/header :: header"></div>	

	<h3 th:text="${currentPlaylist.name}">Playlist</h3>
	<p th:text="|Created ${currentPlaylist.date}|">Created...</p>
	
	<p th:if="${songsInPlaylist == null || songsInPlaylist.size() == 0}"> This playlist doesn't have any songs yet.</p>
	
	<th:block th:if="${group > 1}">
		<a th:href="@{/goToPlaylistPage(idPlaylist=${currentPlaylist.id},group=${group-1})}">Previous</a> 
	</th:block>
	
	<table th:if="${songsInPlaylist.size() > 0}">
		<tbody>
			<tr>
				<th:block th:each="song : ${songsInPlaylist}">
					<td>
						<div>
							<img width="100" th:src="${'data:image/jpeg;base64,'+ song.album.cover}"/><br> 
							<a th:href="@{/goToPlayer(idSong=${song.id}, currentPlaylist=${currentPlaylist.id})}"><span th:text="${song.title}">Song</span></a>
							<br>
							<!-- <p th:text="|${song.album.artist}(${song.album.title}|">Artist (Album)</p> -->
						</div>
					</td>
					<td> </td>
				</th:block>
			</tr>
		</tbody>
	</table>
	<th:block th:if="${next == true}">
		<a th:href="@{/goToPlaylistPage(idPlaylist=${currentPlaylist.id},group=${group+1})}">Following</a> 
	</th:block>
	
	<th:block th:if="${songsNotInPlaylist.size() > 0}">
	<h3>Add another song to your playlist:</h3>
	<form action="#" th:action="@{/addSongToPlaylist}" method="POST">
		<input type="hidden" name="idPlaylist" th:value="${currentPlaylist.id}">
		<select name="selectedSong" required>
	    	<option selected>Your Song</option>
        	<option th:each="song : ${songsNotInPlaylist}" th:value="${song.id}" th:text="|${song.title} from ${song.album.title}(${song.album.artist})|">Song</option>
      	</select>
      	<br>
		<button type="submit">Submit Song</button>
	</form>
	
	<!--  
	<form action="#" th:action="@{/addSongToPlaylist}" method="POST">
		<th:block th:each="song : ${songsNotInPlaylist}">
			<input type="hidden" name="idPlaylist" th:value="${currentPlaylist.id}" >
     	 	<input type="checkbox" id="selectedSong" name="selectedSong" th:value="${song.id}">
     	 	<label for="selectedSong" th:text="|${song.title} from ${song.album.title}(${song.album.artist})|"></label> 
     	 	<br>
   	    </th:block>
   	    <button type="submit">Add Song</button>
	</form>
	-->
	</th:block>
	

</body>
</html>